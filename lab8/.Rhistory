knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
library(naniar)
library(tidyverse)
library(janitor)
library(skimr)
library(naniar)
read.csv("data/amniota.csv")
amniota <- read.csv("data/amniota.csv")
amphibio <- read.csv("data/amphibio.csv")
View(amphibio)
View(amniota)
amphibio <- read.csv("data/amphibio.csv")
amniota <- read.csv("data/amniota.csv")
glimpse(amniota)
amniota %>%
map_df(~ sum(is.na(.)))
glimpse(amphibio)
amniota %>%
map_df(~ sum(is.na(.)))
glimpse(amniota)
amphibio %>%
map_df(~ sum(is.na(.)))
miss_var_summary(amniota)
miss_var_summary(amniota)
miss_var_summary(amphibio)
amniota <- amniota %>%
eplace_with_na(replace)
amniota <- amniota %>%
replace_with_na(replace)
?list
amniota <- amniota %>%
replace_with_na(replace=list(c(across(female_maturity_d:no_sex_maturity_d))))
amniota <- amniota %>%
replace_with_na(replace=list(across(c(female_maturity_d:no_sex_maturity_d))))
#install.packages("naniar")
library("tidyverse")
library("naniar")
library("skimr")
library("janitor")
life_history <- read_csv("data/mammal_lifehistories_v3.csv") %>% clean_names()
glimpse(life_history)
summary(life_history)
life_history %>%
map_df(~ sum(is.na(.))) # It's telling you theres no NA because it read -999 as a number not NA
life_history <- read_csv("data/mammal_lifehistories_v3.csv", na=c("NA", " ", ".", "-999", "not measured")) %>% clean_names()
# You need to know how the NA's are represented in the data
# You don't want to do this by default
naniar::miss_var_summary(life_history)
hist(life_history$max_life)
life_history <-
life_history %>%
mutate(max_life=na_if(max_life, 0))
life_history <-
life_history %>%
mutate(max_life=na_if(max_life, 0))
miss_var_summary(life_history)
life_history %>%
group_by(order) %>%
select(order, wean_mass) %>%
miss_var_summary(order=T)
life_history %>%
replace_with_na(replace = list(newborn = "not measured",
weaning= -999,
wean_mass= -999,
afr= -999,
max_life= 0,
litter_size= -999,
gestation= -999,
mass= -999)) %>%
miss_var_summary()
# Makes replacement of NA's very specific
names(amniota)
amniota %>%
group_by(order) %>%
miss_var_summary(order=T)
amniota %>%
group_by(order)
amniota %>%
group_by(order) %>%
miss_var_summary(order=T)
life_history_no_nas %>% map_df(~ sum(is.na(.))) # we fixed most of the problems
life_history_no_nas <- read_csv("data/mammal_lifehistories_v3.csv", na=c("NA", " ", ".", "-999", "not measured")) %>% clean_names()
# You need to know how the NA's are represented in the data
# You don't want to do this by default
#  Notice that I am creating a new object/ dataframe that doesn't have any NA's
life_history_no_nas %>% map_df(~ sum(is.na(.))) # we fixed most of the problems
life_history_no_nas <- read_csv("data/mammal_lifehistories_v3.csv", na=c("NA", " ", ".", "-999", "not measured")) %>% clean_names()
# You need to know how the NA's are represented in the data
#  Notice that I am creating a new object/ dataframe that doesn't have any NA's
life_history_no_nas <- read_csv(file = "data/mammal_lifehistories_v3.csv", na = c("NA", " ", ".", "-999")) %>% clean_names()
# You need to know how the NA's are represented in the data
#  Notice that I am creating a new object/ dataframe that doesn't have any NA's
life_history_no_nas <- read_csv(file = "data/mammal_lifehistories_v3.csv", na = c("NA", " ", ".", "-999")) %>% clean_names()
# You need to know how the NA's are represented in the data
#  Notice that I am creating a new object/ dataframe that doesn't have any NA's
life_history_no_nas %>% map_df(~ sum(is.na(.))) # we fixed most of the problems
naniar::miss_var_summary(life_history_no_nas)
hist(life_history_no_nas$max_life)
life_history_no_nas <-
life_history_no_nas %>%
mutate(max_life=na_if(max_life, 0))
miss_var_summary(life_history)
miss_var_summary(life_history_no_nas)
life_history_no_nas %>%
group_by(order) %>%
select(order, wean_mass) %>%
miss_var_summary(order=T)
life_history_no_nas %>%
replace_with_na(replace = list(newborn = "not measured",
weaning= -999,
wean_mass= -999,
afr= -999,
max_life= 0,
litter_size= -999,
gestation= -999,
mass= -999)) %>%
miss_var_summary()
# Makes replacement of NA's very specific
life_history_no_nas %>%
replace_with_na(replace = list(newborn = "not measured",
weaning= -999,
wean_mass= -999,
afr= -999,
max_life= 0,
litter_size= -999,
gestation= -999,
mass= -999)) %>%
miss_var_summary()
# Makes replacement of NA's very specific
life_history %>%
replace_with_na(replace = list(newborn = "not measured",
weaning= -999,
wean_mass= -999,
afr= -999,
max_life= 0,
litter_size= -999,
gestation= -999,
mass= -999)) %>%
miss_var_summary()
# Makes replacement of NA's very specific
life_history_no_nas %>%
group_by(order) %>%
select(order) %>%
miss_var_summary(order=T)
life_history %>% #going back to the original data
replace_with_na_all(condition = ~.x == -999)%>%
miss_var_summary()
common_na_strings
common_na_numbers
life_history %>% #going back to the original data
replace_with_na_all(condition = ~.x %in% c(common_na_strings, common_na_numbers)) %>%
mutate(newborn=na_if(newborn, "not measured"))
amniota <-
amniota %>% #going back to the original data
replace_with_na_all(condition = ~.x %in% c(common_na_strings, common_na_numbers))
View(amniota)
View(amniota)
amniota <- amniota %>%
replace_with_na_all(condition = ~.x %in% c(common_na_strings, common_na_numbers))
amniota <- amniota %>%
replace_with_na_all(condition = ~.x %in% c(common_na_strings, common_na_numbers))
View(amphibio)
miss_var_summary(amphibio)
amphibio %>%
group_by(amphibio) %>%
miss_var_summary(amphibio)
amphibio %>%
group_by(amphibio) %>%
miss_var_summary(order=T)
amphibio %>%
group_by(orde) %>%
miss_var_summary(order=T)
amphibio %>%
group_by(Order) %>%
miss_var_summary(Order=T)
amphibio <- amphibio %>%
replace_with_na_all(condition = ~.x %in% c(common_na_strings, common_na_numbers))
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
library(naniar)
amniota <- read.csv("data/amniota.csv")
amphibio <- read.csv("data/amphibio.csv")
glimpse(amniota)
glimpse(amphibio)
amniota %>%
map_df(~ sum(is.na(.)))
amphibio %>%
map_df(~ sum(is.na(.)))
amniota_no_nas <- amniota %>%
replace_with_na_all(condition = ~.x %in% c(common_na_strings, common_na_numbers))
miss_var_summary()
miss_var_summary(amniota_no_nas)
?pct_miss
miss_var_summary(amniota_no_nas)
miss_var_summary(amphibio)
View(amniota_no_nas)
amniota_no_nas %>%
group_by(class) %>%
miss_var_summary(class=T)
amniota_no_nas %>%
group_by(class) %>%
select(class, egg_mass_g) %>%
miss_var_summary(class=T)
amniota_no_nas %>%
group_by(class) %>%
select(class, egg_mass_g) %>%
miss_var_summary(class=T)
amphibio %>%
select(Fos, Ter, Aqu, Arb) %>%
miss_var_summary()
amphibio <- read.csv("data/amphibio.csv") %>%
clean_names()
amniota <- read.csv("data/amniota.csv") %>%
clean_names()
glimpse(amniota)
glimpse(amphibio)
amniota %>%
map_df(~ sum(is.na(.)))
amphibio %>%
map_df(~ sum(is.na(.)))
amniota_no_nas <- amniota %>%
replace_with_na_all(condition = ~.x %in% c(common_na_strings, common_na_numbers))
amphibio %>%
select(fos, ter, aqu, arb) %>%
miss_var_summary()
amniota <-
readr::read_csv(file = "data/amniota.csv",
na = c("NA", " ", ".", "-999"))
View(amniota)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
library(naniar)
library(tidyverse)
library(janitor)
library(skimr)
library(naniar)
amniota <- read.csv("data/amniota.csv") %>%
clean_names()
View(amniota)
amphibio <- read.csv("data/amphibio.csv") %>%
clean_names()
glimpse(amniota)
glimpse(amphibio)
amniota %>%
map_df(~ sum(is.na(.)))
amphibio %>%
map_df(~ sum(is.na(.)))
amniota_no_nas <- amniota %>%
na_if("-999")
amniota_no_nas <- amniota %>%
na_if(-999)
amniota_no_nas <- amniota %>%
na_if("-999")
amniota_no_nas <- amniota %>%
replace_with_na_all(condition = ~.x == -999)%>%
miss_var_summary()
amniota_no_nas <- amniota %>%
replace_with_na_all(condition = ~.x == -999)%>%
miss_var_summary()
amniota_no_nas <- amniota %>%
replace_with_na_all(condition = ~.x == -999)%>%
miss_var_summary()
View(amniota_no_nas)
amniota_nas <- amniota %>%
replace_with_na_all(condition = ~.x == -999)%>%
miss_var_summary()
View(amniota)
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
library(naniar)
amniota <- read.csv("data/amniota.csv") %>%
clean_names()
amphibio <- read.csv("data/amphibio.csv") %>%
clean_names()
glimpse(amniota)
glimpse(amphibio)
amniota %>%
map_df(~ sum(is.na(.)))
amphibio %>%
map_df(~ sum(is.na(.)))
amniota_nas <- amniota %>%
replace_with_na_all(condition = ~.x == -999)%>%
miss_var_summary()
amniota_nas %>%
group_by(order) %>%
select(order) %>%
miss_var_summary(order=T)
View(amniota)
View(amniota_nas)
amniota %>%
group_by(order) %>%
select(order) %>%
miss_var_summary(order=T)
View(amniota_nas)
miss_var_summary(amniota_no_nas)
miss_var_summary(amniota_nas)
miss_var_summary(amphibio)
miss_var_summary(amniota_nas)
View(amniota_nas)
amniota_nas <- amniota %>%
replace_with_na_all(condition = ~.x == -999)%>%
amniota_nas <- amniota %>%
replace_with_na_all(condition = ~.x == -999)
miss_var_summary(amniota_nas)
amniota_nas %>%
group_by(class) %>%
select(class, egg_mass_g) %>%
miss_var_summary(class=T)
amphibio %>%
select(fos, ter, aqu, arb) %>%
miss_var_summary()
View(amniota_nas)
amniota <-
readr::read_csv(file = "data/amniota.csv",
na = c("NA", "-999"))
amniota <-
readr::read_csv(file = "data/amniota.csv",
na = c("-999"))
amniota <-
readr::read_csv(file = "data/amniota.csv", na = c("-999"))
View(amniota)
View(amniota_nas)
View(amphibio)
